@using WhatHaveYouPlayed.Models.Dto
@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@model AccountDto
@{
    Layout = "/Views/Shared/_LayoutOverview.cshtml";
}
@{if(SignInManager.IsSignedIn(User)){
    <div class="alert alert-warning">
                To delete your account type email and password and rewrite this code to right field!<br />
                @Model.User.Id
    </div>

    <form asp-action="DeleteAccount" method="post">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="form-group mb-2">
                    @Html.TextBoxFor(m=>m.ChangeData.OldEmail ,new{placeholder="Email", @class="form-control", @type="email"})
                    @Html.ValidationMessageFor(m => m.ChangeData.OldEmail, "", new { @class = "text-danger" })
                </div>
                <div class="form-group mb-2">
                    @Html.PasswordFor(m=>m.ChangeData.OldPassword ,new{placeholder="Password", @class="form-control"})
                    @Html.ValidationMessageFor(m => m.ChangeData.OldPassword, "", new { @class = "text-danger" })
                </div>
                <div class="form-group mb-2">
                    @Html.PasswordFor(m=>m.ChangeData.ConfirmDeleteId ,new{placeholder="Confirm Code", @class="form-control"})
                    @Html.ValidationMessageFor(m => m.ChangeData.ConfirmDeleteId, "", new { @class = "text-danger" })
                </div>

                <!-- Button trigger modal -->
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                    Delete Account
                </button>
                <!-- Modal -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5" id="exampleModalLabel">Delete confirmation</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                Do You want to delete your account? 
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-danger">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
    </form>
    @section Scripts {
    <partial name="_ValidationScriptsPartial" />
    }
}}
